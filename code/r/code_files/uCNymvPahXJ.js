if (self.CavalryLogger) { CavalryLogger.start_js(["wWG80"]); }

__d("XTaggingCounterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/composer/tagging/counter/",{event:{type:"Enum",required:true,enumType:1}})}),null);
__d("MTaggingCounter",["AsyncSignal","XTaggingCounterController"],(function a(b,c,d,e,f,g,h,i){var j={logEvent:function k(event,l){var m=i.getURIBuilder().setEnum("event",event).getURI();new h(m).send()}};f.exports=j}),null);
__d("isEmpty",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";function i(k){if(Array.isArray(k))return k.length===0;else if(typeof k==="object"){if(k){!j(k)||k.size===undefined||h(0);for(var l in k)return false}return true}else return!k}function j(k){if(typeof Symbol==="undefined")return false;return k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]}f.exports=i}),18);
__d("MFeedAdsGapRuleViolationDetection",["Banzai","BanzaiODS","CSS","DataAttributeUtils","DOM","ge","isEmpty"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o="ei",p="qid",q="gap rule violation",r="non violating ads gap",s="non violating ego gap",t="first position violation",u="feed load",v="spacing invalidation",w="ego_pymk",x="ego_other",y=[],z=[],A=[],B=[],C={},D={},E={},F=[],G={registerFeedStories:function H(I){var J=m(I.containerID);if(J==null||J.childNodes==null)return;C=babelHelpers["extends"]({},I.demoAdChecks,C);E=I.egoGapRule;F=I.invalidateEgo?I.egoStories:{};var K=this._getStoriesFromContainer(J);if(I.isLoggingEnabled&&K.length!==0)this._logFeedLoad();y=y.concat(K);for(var L in I.minGaps)if(Object.prototype.hasOwnProperty.call(I.minGaps,L))D[L]=I.minGaps[L];if(n(C)){if(I.isLoggingEnabled)this._checkFirstPosViolation(I,J);if(I.invalidateEgo||I.isLoggingEnabled||I.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(I)}},_getStoriesFromContainer:function H(I){var J=[];for(var K=0;K<I.childNodes.length;K++){var L=this._convertStoryNodeToObject(I.childNodes[K]);if(L!==null)J.push(L)}return J},_convertStoryNodeToObject:function H(I){var J=I.getAttribute("data-dedupekey"),K=[k.getDataFt(I)];if(K[0]==null)return null;var L=JSON.parse(K[0]);return{dataFTArray:K,dedupKey:J,isSponsored:!!L[o],isEgoPymk:F[J]===w,isEgoOther:F[J]===x,height:I.offsetHeight,qid:parseInt(L[p],10),nodeID:I.id}},_checkFirstPosViolation:function H(I,J){if(y.length>0&&y[0].isSponsored){var K={ftArray:y[0].dataFTArray,qid:y[0].qid,nodeid:y[0].nodeID};if(I.isLoggingEnabled&&!(y[0].dedupKey in B)){this._logFirstPosViolation(K);B[y[0].dedupKey]=K}}},_getMinGap:function H(I,J,K){var L=Math.min(I?I:Number.MAX_VALUE,J?J:Number.MAX_VALUE);return L!==Number.MAX_VALUE?L:K},_getStoryDedupKeysJSONString:function H(I,J){var K=[];for(var L=I;L<=J;L++)K.push(y[L].dedupKey);return JSON.stringify(K)},_getStoryDedupKeys:function H(){return y.map(function(I){return I.dedupKey})},_checkGapRuleViolation:function H(I){var J=null,K=null,L=null;for(var M=0;M<y.length;M++){var N=y[M];if(N.isSponsored){var O=false,P=false;if(J!==null){var Q=M-K,R=null,S=null;if(J===K)S=this._getMinGap(D[L.dedupKey],D[N.dedupKey],I.defaultMinGap);else S=this._getMinGapBetweenStories(L,N);var T=null;if(Q<S){R=q;T=K}else{R=r;T=J}if(I.isLoggingEnabled)if(!(N.dedupKey in z)||z[N.dedupKey].event_type!==R){this._logGapEvent(R,T,M);z[N.dedupKey]={event_type:R}}if(I.isGapRuleInvalidationEnabled&&R==q){this._invalidateGapRuleViolatedAd(L,N);O=true;y.splice(M--,1)}}if(!O&&!P){J=M;K=M;L=N}}if(I.invalidateEgo&&(N.isEgoPymk||N.isEgoOther)){var U=false;if(K!==null){Q=M-K;S=this._getMinGapBetweenStories(L,y[M]);if(Q<S){U=true;var V=S-Q,W=-1;for(var X=M+1;X<y.length;X++){if(y[X].isSponsored||y[X].isEgoPymk||y[X].isEgoOther)break;else V--;if(V===0){W=X;break}}if(W>0)this._swapAndLogEgo(M,X);else{this._invalidateAndLogEgo(M);M--}}else if(I.shouldLogEgo&&!A[N.dedupKey]){A[N.dedupKey]=true;this._logGapEvent(s,K,M)}}if(!U){K=M;L=N}}}},_getMinGapBetweenStories:function H(I,J){var K="";if(I.isSponsored||I.isEgoOther)K="ad";else if(I.isEgoPymk)K="pymk";else return 0;var L="";if(J.isSponsored||J.isEgoOther)L="ad";else if(J.isEgoPymk)L="pymk";else return 0;return E[K+"_"+L]},_swapAndLogEgo:function H(I,J){this._shiftEgoBelowOrganicStory(y[I].nodeID,y[J].nodeID);var K=y[I];y.splice(I,1);y.splice(J,0,K);i.bumpEntityKey("m_feed_ego_invalidation","swap")},_shiftEgoBelowOrganicStory:function H(I,J){var K=m(I),L=m(J);K&&L&&l.insertAfter(L,K)},_invalidateAndLogEgo:function H(I){var J=m(y[I].nodeID);J&&j.hide(J);y.splice(I,1);i.bumpEntityKey("m_feed_ego_invalidation","invalidate")},_logFirstPosViolation:function H(I){var J={ft:I.ftArray[0],event_type:t,intValues:{qid:I.qid}};if(I.error_msg)J.error_msg=I.error_msg;h.post("feed_ads_gap_rule_violation",J)},_logGapEvent:function H(I,J,K){if(J===null)return;var L=y[J],M=y[K],N=0;for(var O=J+1;O<K;O++)N+=y[O].height;var P={ft_A:L.dataFTArray[0],ft_B:M.dataFTArray[0],event_type:I,intValues:{dist:K-J,pdist:N,pos:K+1,qid_A:L.qid,qid_B:M.qid},strValues:{previous_unit_type:this._getUnitTypeForLogging(L),unit_type:this._getUnitTypeForLogging(M)},dedup_keys:this._getStoryDedupKeysJSONString(J,K)};h.post("feed_ads_gap_rule_violation",P)},_getUnitTypeForLogging:function H(I){if(I.isSponsored)return"ad";else if(I.isEgoPymk)return"pymk";else if(I.isEgoOther)return"ego_other";return null},_logFeedLoad:function H(){var I={event_type:u};h.post("feed_ads_gap_rule_violation",I)},_invalidateGapRuleViolatedAd:function H(I,J){var K=m(J.nodeID);K&&j.hide(K);var L={ft_array_A:I.dataFTArray[0],ft_array_B:J.dataFTArray[0],event_type:v};h.post("feed_ads_gap_rule_violation",L)}};f.exports=G}),null);
__d("MFeedErrorDetection",["Banzai","DataAttributeUtils"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={};function k(event,m,n,o){var p={event:event,shouldLogDetail:m,site:"mtouch"};if(m){p.intValues=n;p.normalValues=o}h.post("feed_error_detection",p,{delay:0})}var l={registerFeedStory:function m(n){var o=n.feedObjectElement,p=n.shouldLogDetail;if(!o)return;var q=i.getDataFt(o),r=o.getAttribute("data-dedupekey");if(!r||!q)return;if(j[r]){var s=void 0;if(p)s={dedupKey:r,ft_A:q,ft_B:j[r]};k("mtouch_duplicate_stories",p,{},{dup_field:s||{}})}else j[r]=q}};f.exports=l}),null);
__d("MFriendingActionError",[],(function a(b,c,d,e,f,g){f.exports={CONFIRM_INCOMING_REQUEST_ERROR:"confirm_incomming_request_error",DELETE_INCOMING_REQUEST_ERROR:"delete_incomming_request_error",SEND_OUTGOING_REQUEST_ERROR:"send_outgoing_request_error",CANCEL_OUTGOING_REQUEST_ERROR:"cancel_outgoing_request_error"}}),null);
__d("MSnowflakeLink",["DataAttributeUtils","DOM","MModalDialog","URI","MLinkHack","Parent","Stratcom","destroyOnUnload"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(q){"use strict";this.$MSnowflakeLink1=false;this.$MSnowflakeLink2=q.node;this.$MSnowflakeLink3=q.permalink;this.$MSnowflakeLink4=q.setToken;this.$MSnowflakeLink5=q.targetPhoto;this.$MSnowflakeLink6=i.listen(q.node,"click",null,this.onClick.bind(this));o(function(){return this.$MSnowflakeLink6.remove()}.bind(this));this.$MSnowflakeLink7()}p.prototype.getFeedTrackingOwnerID=function(){"use strict";var q=h.getClickTrackingParent(this.$MSnowflakeLink2);return q&&q.id};p.prototype.getPermalinkURI=function(){"use strict";return new k(this.$MSnowflakeLink3).addQueryData("photo_id",this.$MSnowflakeLink5)};p.prototype.getModalDialogURI=function(){"use strict";return new k(this.$MSnowflakeLink2.getAttribute("href")).addQueryData("cached_data",this.$MSnowflakeLink1).addQueryData("ftid",this.getFeedTrackingOwnerID())};p.prototype.onClick=function(q){"use strict";l.remove(this.$MSnowflakeLink2);j.openWithPermalinkURI(this.getModalDialogURI().toString(),this.getPermalinkURI());q.kill()};p.prototype.$MSnowflakeLink7=function(){"use strict";if(!this.$MSnowflakeLink4){this.$MSnowflakeLink1=true;return}var q=n.listen("m:photosetstore:update",null,function(event){var r=(event.getData()||{}).set_token;if(!q||r!=this.$MSnowflakeLink4)return;this.$MSnowflakeLink1=true;q.remove();q=null}.bind(this));o(function(){return q&&q.remove()})};f.exports=p}),null);
__d("MShareAngoraAttachment",["Stratcom"],(function a(b,c,d,e,f,g,h){var i=false,j=function j(k){if(i)return;i=true;window.addEventListener("error",function(event){if(event.target.nodeName=="IMG"){for(var l=event.target;l!=document.body&&!h.hasSigil(l,"shareAngoraAttachmentMedia");l=l.parentNode);if(l!=document.body)l.style.display="none"}},true)};g.registerDeadImageListener=j}),null);
__d("MExposeMore",["CSS","DOM","Stratcom"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k=[];function l(){while(k.length)k.pop().remove()}var m="expose";j.listen("click",[m,"more"],function(event){var o=event.getNode(m);h.conditionClass(o,"text_exposed",true);event.prevent()});var n={showMessageSuffixOnClick:function o(p,q){if(q.children.length!==0){if(!k.length)k.push(j.listen("m:page:unload",null,l));var r=i.scry(p,"*","more")[0];if(r)k.push(i.listen(r,"click",null,function(event){h.show(q);event.prevent()}))}}};f.exports=n}),null);
__d("MTaggingCounterEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GEO_PANEL_LOAD:"geo_panel_load",GEO_PANEL_ACCEPT:"geo_panel_accept",GEO_PANEL_DENY:"geo_panel_deny",GEO_PANEL_FAIL:"geo_panel_fail",GEO_PANEL_SUCCESS:"geo_panel_success",GEO_POPUP_LOAD:"geo_popup_load",GEO_POPUP_FAIL:"geo_popup_fail",GEO_POPUP_SUCCESS:"geo_popup_success"})}),null);
__d("ViewerLocationSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AURA:"aura",GET_PARAM:"get_param",INTERN_TOOL:"intern_tool",LAST_LOCATION:"last_location",LOGIN:"login",PLACEBOOK:"placebook",PLACES_FQL:"places_fql",TEST:"test",MSITE_LOCATION_PROMPT:"msite_location_prompt",MSITE_PERSISTENT_LOCATION:"msite_persistent_location",MSITE_PLACES:"msite_places",MSITE_UNKNOWN:"msite_unknown",CORE_GQL_MUTATION:"core_graphql_mutation",MULTIFEED_PARAM:"multifeed_param",LOCATION_PROFILE_FRAMES:"location_profile_frames",PR_LOCATION_EFFECTS:"pr_location_effects",MESSENGER_LIVE_LOCATION:"messenger_live_location",VISIT_STATE:"visit_state",WIFI_FINGERPRINT:"wifi_fingerprint",INFERRED_WIFI:"inferred_wifi",INSTA_GEO_IMPLICIT:"insta_geo_implicit",AURA_TOO_FAST:"aura_too_fast",AURA_TOO_OLD:"aura_old",AURA_FAILED_MGI:"aura_failed_mgi"})}),null);
__d("XPlacesUpdateLocationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/places/location_update/",{json_location:{type:"String"},source:{type:"Enum",defaultValue:"msite_unknown",enumType:1}})}),null);
__d("MLocationPrompt",["DOM","MRequest","Stratcom","WebStorage","XPlacesUpdateLocationController","MTaggingCounter","MTaggingCounterEvent","ViewerLocationSource"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=["latitude","longitude","accuracy","altitude","altitudeAccuracy","heading","speed"],q={enableHighAccuracy:true,timeout:6e4,maximumAge:3e5},r=6e4;s.init=function(t,u,v,w){"use strict";return new s(t,u,v,w)};s.getCoords=function(){"use strict";return s.coords};s.isLocationAvailable=function(){"use strict";return s.locationAvailable};function s(t,u,v,w){"use strict";this.lastUpdateTime=0;this.container=t;this.question=u;this.loading=v;this.errored=w;var x=k.getLocalStorage();if(x&&x.getItem(s.GEOLOCATION_KEY)==="1")this.$MLocationPrompt1();else{s.locationAvailable=false;h.show(this.question);h.hide(this.loading);h.hide(this.errored);h.show(this.container);j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");m.logEvent(n.GEO_PANEL_LOAD)}this.listeners=[j.listen("click","accept-location",this.$MLocationPrompt2.bind(this)),j.listen("click","deny-location",this.$MLocationPrompt3.bind(this)),j.listen("m:page:unload",null,this.$MLocationPrompt4.bind(this))]}s.prototype.clearWatch=function(){"use strict";if(!this.watchID)return;navigator.geolocation.clearWatch(this.watchID);this.watchID=null};s.prototype.$MLocationPrompt2=function(){"use strict";m.logEvent(n.GEO_PANEL_ACCEPT);this.$MLocationPrompt1(true)};s.prototype.$MLocationPrompt1=function(t){"use strict";s.locationAvailable=true;var u=k.getLocalStorage();if(u)u.setItem(s.GEOLOCATION_KEY,"1");h.show(this.container);h.hide(this.question);h.show(this.loading);h.hide(this.errored);j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");var v=setTimeout(this.$MLocationPrompt5,q.timeout);this.watchID=navigator.geolocation.watchPosition(function(w){if(t)m.logEvent(n.GEO_PANEL_SUCCESS);clearTimeout(v);this.$MLocationPrompt6(w)}.bind(this),function(w){if(t)m.logEvent(n.GEO_PANEL_FAIL);clearTimeout(v);this.$MLocationPrompt5(w)}.bind(this),q);j.invoke(s.STRATCOM_ACCEPT)};s.prototype.$MLocationPrompt3=function(){"use strict";s.locationAvailable=false;m.logEvent(n.GEO_PANEL_DENY);h.hide(this.container);j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");j.invoke(s.STRATCOM_DENY)};s.prototype.$MLocationPrompt6=function(t){"use strict";s.locationAvailable=true;if(t){var u={},v;for(var w=0;w<p.length;w++){v=p[w];if(t.coords[v])u[v]=t.coords[v]}if(t.timestamp)u.timestamp=t.timestamp/1e3;this.$MLocationPrompt7(JSON.stringify(u));h.hide(this.container);s.coords=u;j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");j.invoke(s.STRATCOM_UPDATE,null,{position:t})}};s.prototype.$MLocationPrompt5=function(t){"use strict";s.locationAvailable=false;this.clearWatch();var u=k.getLocalStorage();if(u)u.setItem(s.GEOLOCATION_KEY,"0");h.show(this.container);h.hide(this.question);h.hide(this.loading);h.show(this.errored);j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");j.invoke(s.STRATCOM_FAIL,null,{error:t});m.logEvent(n.GEO_PANEL_FAIL)};s.prototype.$MLocationPrompt7=function(t){"use strict";var u=Date.now();if(u-this.lastUpdateTime>r){this.lastUpdateTime=u;var v=l.getURIBuilder().setString("json_location",t).setEnum("source",o.MSITE_LOCATION_PROMPT).getURI();new i(v).setMethod("POST").send()}};s.prototype.$MLocationPrompt4=function(){"use strict";if(!this.listeners)return;for(var t=0;t<this.listeners.length;t++)this.listeners[t].remove();this.listeners=[]};Object.assign(s,{STRATCOM_ACCEPT:"MLocationPrompt/accept",STRATCOM_DENY:"MLocationPrompt/deny",STRATCOM_UPDATE:"MLocationPrompt/update",STRATCOM_FAIL:"MLocationPrompt/fail",GEOLOCATION_KEY:"authorizeGeolocation",locationAvailable:undefined});f.exports=s}),null);
__d("MMoreItemAutomatic",["MLocationPrompt","MPageCache","MPageControllerPath","MRequest","MRequestGateway","MRequestTypes","MResponseData","MStopNGo","MURI","MViewport","Stratcom","Vector","createDeprecatedProperties","throttle"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(w){"use strict";this._onScrollPrefetch=function(){if(this._insertWhileScrolling)this._onGo();else if(!this._itemsLoaded&&!this._requestSent)this._sendRequestIfScrolledDown()}.bind(this);this._href=w.href;this._sendGeolocation=w.sendGeolocation;this._proximityPages=w.proximity_pages||7;this._loggerID=w.logger_id;this._loggerName=w.logger_name;this._loadImmediately=w.load_first_immediately;this._retryOnError=w.retryOnError;this._addToCache=w.addToCache;this._alwaysProcess=w.alwaysProcess;this._scrollPrefetchThrottleFreq=w.scrollPrefetchThrottleFreq||0;this._insertWhileScrolling=w.insertWhileScrolling;var x=document.getElementById(w.id);if(x){this._verticalOffset=s.getPos(x).y;this.setMoreItem(x);this.setPersistOnReload(w.persist_on_reload);this._setUpSendRequest()}else this.uninstall()}v.prototype.isElementVisible=function(){"use strict";if(!this._isElementRendered())return false;var w,x=this.getMoreItem();if("getBoundingClientRect"in x){var y=x.getBoundingClientRect(),z=y.width/10,A=y.height/10,B=y.left,C=y.right,D=y.top,E=y.bottom,F;while(F!==x&&B<=C&&D<=E){B+=z;D+=A;F=document.elementFromPoint(Math.round(B),Math.round(D))}w=F===x}else{var G=s.getPos(x).y,H=G+s.getDim(x).y,I=q.getScrollTop(),J=I+q.getUseableHeight();w=G<=J&&H>=I}return w};v.prototype._checkScrolledIntoFetched=function(){"use strict";var w=this.getMoreItem();if(w)if(this._verticalOffset-q.getScrollTop()<0){r.invoke("m:more_item_automatic:items_visible",this._loggerID);this.uninstall()}};v.prototype._onGo=function(){"use strict";if(!this._itemsLoaded){this._readyToUpdate=true;if(this.isElementVisible())r.invoke("m:more_item_automatic:spinner_visible",this._loggerID);if(!this._requestSent)this._sendRequestIfScrolledDown();else this._updateItems()}else this._checkScrolledIntoFetched()};v.prototype._onStop=function(){"use strict";if(!this._itemsLoaded)this._readyToUpdate=false};v.prototype._onAjaxPageLoad=function(){"use strict";if(!this._requestSent&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false}};v.prototype._setUpSendRequest=function(){"use strict";if(!this._requestSent&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false}this._listeners=[];if(this._scrollPrefetchThrottleFreq>0)this._listeners.push(r.listen(["m:page:render:complete","scroll"],null,u.withBlocking(this._onScrollPrefetch,this._scrollPrefetchThrottleFreq,this)));if(!this._insertWhileScrolling)this._listeners.push(o.listen("go",this._onGo.bind(this)),o.listen("stop",this._onStop.bind(this)));this._listeners.push(r.listen("m:ajax:complete",null,this._onAjaxPageLoad.bind(this)))};v.prototype._existsOnPage=function(){"use strict";var w=this.getMoreItem();return w?document.documentElement.contains(w):false};v.prototype.uninstall=function(){"use strict";while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._requestSent=false;this._prefetchResponse=null;this.setMoreItem(null);this.setPersistOnReload(false);clearTimeout(this._retryTimeout);clearTimeout(this._sendTimeout)};v.prototype.withinProximity=function(){"use strict";var w=this.getMoreItem();return w&&s.getPos(w).y-q.getScrollTop()<q.getUseableHeight()*(1+this._proximityPages)};v.prototype._updateItems=function(){"use strict";if(this._prefetchResponse){if(this._existsOnPage()){this._prefetchResponse.process();if(this._addToCache)i.addCachedIUIResponse(j.getRequestPath(),this._prefetchResponse)}r.invoke("m:more_item_automatic:items_loaded",this._loggerID);this._itemsLoaded=true}};v.prototype._isElementRendered=function(){"use strict";var w=this.getMoreItem();if(!w||!w.offsetHeight)return false;return true};v.prototype._sendRequestIfScrolledDown=function(){"use strict";if(this.isElementVisible()||this._isElementRendered()&&q.getScrollTop()>100&&this.withinProximity())this._sendRequest()};v.prototype._sendRequest=function(){"use strict";var w=h.getCoords();if(this._sendGeolocation&&w)this._href=new p(this._href).addQueryData("lat",w.latitude).addQueryData("long",w.longitude).toString();var x=new k(new p(this._href).toString());if(this._alwaysProcess)x.setType(m.INDEPENDENT);else x.setType(m.DEPENDENT);x.setAutoProcess(false);var y=[],z=false,A=function A(){if(!z&&y.length){z=true;y.shift().process()}};if(this._retryOnError){x.setTimeout(l.ERROR_TIMEOUT);x.listen("error",function(B,C){this._retryTimeout=setTimeout(function(){if(navigator.onLine){C.reset();C.addData({is_retry:1});C.sendAfterProcessing()}}.bind(this),v.TRY_AGAIN_DELAY)})}x.listen("response",function(B){B=new n(B);B.listen("complete",function(){z=false;A()});if(B.isPagelet()){y.push(B);A();return}z=true;this._prefetchResponse=B;if(this._readyToUpdate)this._updateItems()}.bind(this));x.send();this._requestSent=true};t(v,{moreItem:null,persistOnReload:false});Object.assign(v.prototype,{_requestSent:false,_readyToUpdate:true,_moreStartTime:0,_moreLogged:false,_proximityPages:null,_prefetchResponse:null,_listeners:null,_href:null,_loggerName:null,_loggerID:null,_itemsLoaded:false,_verticalOffset:0});Object.assign(v,{TRY_AGAIN_DELAY:1500});f.exports=v}),null);
__d("InitMMoreItemAutomatic",["MMoreItemAutomatic","Stratcom"],(function a(b,c,d,e,f,g,h,i){var j,k=function k(l){if(!j){j={};i.listen("m:page:loading",null,function(n){for(var o in j)if(!j[o].getPersistOnReload()){j[o].uninstall();delete j[o]}})}var m=l.id;if(j[m])j[m].uninstall();j[m]=new h(l)};g.main=k}),null);
__d("MMoreItemAutomaticLogger",["Stratcom","MarauderLogger"],(function a(b,c,d,e,f,g,h,i){function j(k,l){this._loggerName=k;this._loggerID=l;this._listeners=[h.listen("m:page:unload",null,this._pageUnload.bind(this)),h.listen("m:more_item_automatic:spinner_visible",null,this._onSpinnerVisible.bind(this)),h.listen("m:more_item_automatic:items_loaded",null,this._onItemsLoaded.bind(this)),h.listen("m:more_item_automatic:items_visible",null,this._onItemsVisible.bind(this))]}Object.assign(j.prototype,{_loggerName:"",_loggerID:"",_spinnerUnloaded:false,_spinnerVisible:false,_spinnerStartTime:null,_cleanup:function k(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove()},_pageUnload:function k(){if(this._spinnerVisible){this._spinnerUnloaded=true;this._logLoadingSpinnerTime(this._getTimeSpan(),true)}this._cleanup()},_onSpinnerVisible:function k(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerVisible){this._spinnerVisible=true;this._spinnerStartTime=Date.now()}},_onItemsLoaded:function k(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerUnloaded){this._logLoadingSpinnerTime(this._getTimeSpan(),false);this._spinnerVisible=false;this._spinnerStartTime=null}},_onItemsVisible:function k(event){if(event.getPath()[0]===this._loggerID)this._logItemsVisible()},_getTimeSpan:function k(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0},_logLoadingSpinnerTime:function k(l,m){i.log("m_more_items_automatic_spinner_visible_time",undefined,{name:this._loggerName,id:this._loggerID,visible_time:l,spinner_unloaded:m})},_logItemsVisible:function k(){i.log("m_more_items_automatic_fetched_items_visible",undefined,{name:this._loggerName,id:this._loggerID});this._cleanup()}});j.init=function(k,l){new j(k,l)};f.exports=j}),null);
__d("MContextualThing",[],(function a(b,c,d,e,f,g){var h=0,i={register:function j(k,l){l.id=l.id||"ctxtlayer_"+h++;k.setAttribute("data-ownerid",l.id)},containsIncludingLayers:function j(k,l){while(l){if(k.contains(l))return true;l=i.getContext(l)}return false},getContext:function j(k){var l;while(k){if(k.getAttribute&&(l=k.getAttribute("data-ownerid")))return document.getElementById(l);k=k.parentNode}return null}};f.exports=i}),null);
__d("BehaviorsMixin",[],(function a(b,c,d,e,f,g){function h(l){"use strict";this.$InstalledBehavior1=l;this.$InstalledBehavior2=false}h.prototype.enable=function(){"use strict";if(!this.$InstalledBehavior2){this.$InstalledBehavior2=true;this.$InstalledBehavior1.enable()}};h.prototype.disable=function(){"use strict";if(this.$InstalledBehavior2){this.$InstalledBehavior2=false;this.$InstalledBehavior1.disable()}};var i=1;function j(l){if(!l.__BEHAVIOR_ID)l.__BEHAVIOR_ID=i++;return l.__BEHAVIOR_ID}var k={enableBehavior:function l(m){if(!this._behaviors)this._behaviors={};var n=j(m);if(!this._behaviors[n])this._behaviors[n]=new h(new m(this));this._behaviors[n].enable();return this},disableBehavior:function l(m){if(this._behaviors){var n=j(m);if(this._behaviors[n])this._behaviors[n].disable()}return this},enableBehaviors:function l(m){m.forEach(this.enableBehavior,this);return this},destroyBehaviors:function l(){if(this._behaviors){for(var m in this._behaviors)this._behaviors[m].disable();this._behaviors={}}},hasBehavior:function l(m){return this._behaviors&&j(m)in this._behaviors}};f.exports=k}),null);
__d("MLayer",["setTimeoutAcrossTransitions","BehaviorsMixin","CSS","MLegacyDataStore","DOM","MContextualThing","mixin","mixInEventEmitter","Stratcom","ge"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s,t=[],u={};r=babelHelpers.inherits(v,n(i));s=r&&r.prototype;function v(z){"use strict";s.constructor.call(this);this.config=z||{};this.$MLayer1=null;this.$MLayer2=false;this.$MLayer3=false;this.$MLayer4=null}v.prototype.init=function(z){"use strict";if(this.config.layerid){if(u[this.config.layerid])return;u[this.config.layerid]=this}this.configure(this.config,z);var A=this.config.addedBehaviors||[];this.enableBehaviors(this.getDefaultBehaviors().concat(A));var B=q("flyout-nocontext-root");if(!B)B=l.create("div",{id:"flyout-nocontext-root"});l.appendContent(document.body,B);l.appendContent(B,this.getRoot());l.hide(this.getRoot())};v.prototype.configure=function(z,A){"use strict";this.$MLayer1=this.buildWrapper(z,A);p.addSigil(this.$MLayer1,"m-layer-root");var B=z.attributes;if(B){if(B.sigil){var C=B.sigil.split(" ");C.forEach(function(E){p.addSigil(this.$MLayer1,E)},this);delete B.sigil}for(var D in B)this.$MLayer1.setAttribute(D,B[D])}if(z.classNames)z.classNames.forEach(function(E){j.conditionClass(this.$MLayer1,E,true)},this);if(z.causalElement)this.$MLayer4=z.causalElement;k.set(this.$MLayer1,{layer:this})};v.prototype.getDefaultBehaviors=function(){"use strict";return[]};v.prototype.getCausalElement=function(){"use strict";return this.$MLayer4};v.prototype.setCausalElement=function(z){"use strict";this.$MLayer4=z;return this};v.prototype.getInsertParent=function(){"use strict";return this.insertParent||document.body};v.prototype.getRoot=function(){"use strict";return this.$MLayer1};v.prototype.getContentRoot=function(){"use strict";return this.$MLayer1};v.prototype.buildWrapper=function(z,A){"use strict";return A};v.prototype.setInsertParent=function(z){"use strict";if(z){if(this.$MLayer2&&z!==this.getInsertParent()){l.appendContent(z,this.getRoot());this.updatePosition()}this.insertParent=z}return this};v.prototype.show=function(){"use strict";if(this.$MLayer2)return this;var z=this.getRoot(),A=this.getInsertParent();if(z.parentNode!==A)l.appendContent(A,z);this.emit("beforeshow");z.style.visibility="hidden";z.style.overflow="hidden";l.show(z);if(this.updatePosition()!==false){this.$MLayer2=true;this.emit("show");p.invoke("Layer:show",null,this);h(function(){if(this.$MLayer2)t.push(this)}.bind(this))}else l.hide(z);z.style.visibility="";z.style.overflow="";this.emit("aftershow");return this};v.prototype.hide=function(){"use strict";if(this.$MLayer3||!this.$MLayer2||this.emit("beforehide")===false)return this;this.$MLayer3=true;if(this.emit("starthide")!==false)this.finishHide();return this};v.prototype.conditionShow=function(z){"use strict";return z?this.show():this.hide()};v.prototype.finishHide=function(){"use strict";if(this.$MLayer2){t.splice(t.indexOf(this),1);this.$MLayer3=false;this.$MLayer2=false;l.hide(this.getRoot());this.emit("hide");p.invoke("m:layer:hide",null,this)}return this};v.prototype.isShown=function(){"use strict";return this.$MLayer2};v.prototype.updatePosition=function(){"use strict";return true};v.prototype.updateIfShown=function(){"use strict";this.isShown()&&this.updatePosition()};v.prototype.isDestroyed=function(){"use strict";return this.destroyed};v.prototype.destroy=function(){"use strict";if(this.destroyed)return;this.destroyed=true;this.finishHide();var z=this.getRoot();l.remove(z);this.destroyBehaviors();this.emit("destroy");p.invoke("Layer:destroy",null,this);delete k.get(z).layer;this.$MLayer1=this.$MLayer4=null;if(this.config.layerid)delete u[this.config.layerid];this.config=null};v.prototype.shouldBlurOnTouchEnd=function(){"use strict";return true};o(v,{destroy:true,blur:true,beforeshow:true,show:true,aftershow:true,beforehide:true,starthide:true,hide:true});Object.assign(v,{show:function z(A){A.show()}});var w;function x(event){var z=event.getTouch(),A=z.clientX,B=z.clientY;w={x:A,y:B}}function y(event){var z=t.length;if(!z)return;var A=event.getTarget(),B=event.getType();if(!document.documentElement.contains(A))return;if(B==="touchend"&&w){var C=event.getTouch(),D=C.clientX,E=C.clientY,F=Math.sqrt(Math.pow(w.x-D,2)+Math.pow(w.y-E,2));w=null;if(F>5)return}while(z--){var G=t[z];if(!G.isShown())continue;var H=G.getContentRoot();if(m.containsIncludingLayers(H,A))return;var I=G.getCausalElement();if(B==="touchend"&&(I.contains(A)||I===A||!G.shouldBlurOnTouchEnd()))continue;if(G.emit("blur")===false||G.isShown())return}}p.listen("touchstart",null,x);p.listen("click",null,y);p.listen("touchend",null,y);f.exports=v}),null);
__d("MLayerDestroyOnHide",[],(function a(b,c,d,e,f,g){function h(i){"use strict";this.$MLayerDestroyOnHide1=i;this.$MLayerDestroyOnHide2}h.prototype.enable=function(){"use strict";this.$MLayerDestroyOnHide2=this.$MLayerDestroyOnHide1.addListener("hide",this.$MLayerDestroyOnHide1.destroy.bind(this.$MLayerDestroyOnHide1))};h.prototype.disable=function(){"use strict";this.$MLayerDestroyOnHide1=null;this.$MLayerDestroyOnHide2.remove();this.$MLayerDestroyOnHide2=null};f.exports=h}),null);
__d("MLayerDestroyOnTransition",["Stratcom"],(function a(b,c,d,e,f,g,h){function i(j){"use strict";this.$MLayerDestroyOnTransition1=null;this.$MLayerDestroyOnTransition2=j}i.prototype.enable=function(){"use strict";this.$MLayerDestroyOnTransition1=h.listen("m:page:unload",null,this.$MLayerDestroyOnTransition2.destroy.bind(this.$MLayerDestroyOnTransition2))};i.prototype.disable=function(){"use strict";this.$MLayerDestroyOnTransition1.remove();this.$MLayerDestroyOnTransition1=null};f.exports=i}),null);
__d("MLayerHideOnBlur",[],(function a(b,c,d,e,f,g){function h(i){"use strict";this.$MLayerHideOnBlur1=null;this.$MLayerHideOnBlur2=null;this.$MLayerHideOnBlur3=i}h.prototype.enable=function(){"use strict";this.$MLayerHideOnBlur1=[this.$MLayerHideOnBlur3.addListener("show",this.$MLayerHideOnBlur4.bind(this)),this.$MLayerHideOnBlur3.addListener("hide",this.$MLayerHideOnBlur5.bind(this))];if(this.$MLayerHideOnBlur3.isShown())this.$MLayerHideOnBlur4()};h.prototype.disable=function(){"use strict";this.$MLayerHideOnBlur5();while(this.$MLayerHideOnBlur1.length)this.$MLayerHideOnBlur1.pop().remove();this.$MLayerHideOnBlur1=null};h.prototype.$MLayerHideOnBlur5=function(){"use strict";this.$MLayerHideOnBlur2&&this.$MLayerHideOnBlur2.remove();this.$MLayerHideOnBlur2=null};h.prototype.$MLayerHideOnBlur4=function(){"use strict";this.$MLayerHideOnBlur2=this.$MLayerHideOnBlur3.addListener("blur",function(){this.$MLayerHideOnBlur3.hide()}.bind(this))};f.exports=h}),null);
__d("MLinkshim",["$","setTimeoutAcrossTransitions","AsyncSignal","Stratcom","MLegacyDataStore","LinkshimHandlerConfig"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n="MLinkshim",o={onClick:function p(q){var r=q.getNode(n),s=l.get(r);o.click(r,s.dest_uri,s.logging_uri)},click:function p(q,r,s){var t=h("meta_referrer");t.content=m.switched_meta_referrer_policy;q.href=r;i(function(){t.content=m.default_meta_referrer_policy;new j(s,{}).send()},100)}};k.listen("click",n,o.onClick);f.exports=o}),null);
__d("MActionBubbleHelper",["CSS","Stratcom","cx","BanzaiODS"],(function a(b,c,d,e,f,g,h,i,j,k){var l="enabled_action";f.exports.toggleActionBubbleItem=function(m,n,o,p){k.bumpEntityKey("rrsurfaces","action_bubble.toggle_action."+String(n)+"."+o+"."+p);h.conditionClass(m,"_58a0",n);if(n)i.addSigil(m,l);else i.removeSigil(m,l)}}),null);
__d("Locale",["ExecutionEnvironment","SiteData"],(function a(b,c,d,e,f,g,h,i){function j(){if(!h.canUseDOM)return false;else return i.is_rtl}f.exports={isRTL:j}}),null);
__d("clamp",[],(function a(b,c,d,e,f,g){function h(i,j,k){if(i<j)return j;if(i>k)return k;return i}f.exports=h}),null);
__d("MFlyout",["CSS","MLegacyDataStore","DOM","Locale","MContextualThing","MLayer","MParent","MViewport","Scroll","Stratcom","Vector","MJSEnvironment","clamp","cx","emptyFunction","mixInEventEmitter"],(function a(b,aa,ba,ca,c,da,d,e,f,g,h,i,j,k,ea,l,m,n,o,fa,p,q){var r,s,t=52,u=26,v=10,w=22,x=3,y=400,z=320,A=["resize","m:schedulable:loaded","m:viewport:orientation-change","m:orientation-resize:complete","m:hideout:reflow","m:landscape-cover-crop:complete"],B="flyout-causal",C=f.create("div",{className:"_5so _2wyb"});function D(){return document.body}var E=[];r=babelHelpers.inherits(F,i);s=r&&r.prototype;function F(J,K){"use strict";s.constructor.call(this,J);this._contentRoot=null;this._contentWrapper=null;this._nubNode=null;this._nubAlignment=null;this._content=null;this._contextNode=null;this._parentLayer=null;this._parentSubscription=null;this._orientation=null;this._orientationClass=null;this._width=null;this._modal=null;this._contentPositioner=null;this._heightConstraint=null;this._autoflipTopOffset=null;this.init(K)}F.prototype.configure=function(J,K){"use strict";s.configure.call(this,J,K);if(J.context){this.setContext(J.context);this.setParentSubscription();l.addSigil(this.getCausalElement(),B);var L=e.get(this.getCausalElement());L.flyout=this}this.setMargin(J.margin);this.setPosition(J.position);this.setNubAlign(J.nubalign);this.setOffsetY(J.offsetY);this._content=K;this.setWidth(J.width);this.setModal(!!J.modal);this.setAutoflipTopOffset(J.autoFlipTopOffset)};F.prototype.setWidth=function(J){"use strict";this._width=J};F.prototype.setModal=function(J){"use strict";this._modal=J};F.prototype.getModal=function(){"use strict";return this._modal};F.prototype.setAutoflipTopOffset=function(J){"use strict";this._autoflipTopOffset=J};F.prototype.getAutoflipTopOffset=function(){"use strict";return this._autoflipTopOffset};F.prototype._getLayerParentWidth=function(){"use strict";return m.getDim(this.getRoot().offsetParent).x};F.prototype.getMaxWidth=function(){"use strict";return Math.min(this._getLayerParentWidth(),n.IS_TABLET?z:y)};F.prototype._maxWidthIsApplicable=function(){"use strict";return this.getMaxWidth()!==this._getLayerParentWidth()};F.prototype._isCustomWidth=function(){"use strict";return this._width==="auto"||this._maxWidthIsApplicable()};F.prototype.applyWidth=function(){"use strict";var J=this._contentRoot.style;J.width="";J.maxWidth="";if(this._maxWidthIsApplicable()){var K=this.getMaxWidth()+"px";if(this._width==="auto")J.maxWidth=K;else J.width=K}d.conditionClass(this._contentRoot,"_556f",this._isCustomWidth())};F.prototype.buildWrapper=function(J,K){"use strict";this._nubNode=f.create("div",{className:"_5bn_"});this._backgroundNode=f.create("div",{className:"_5c0e"},this._nubNode);var L=f.create("div",{className:"_5c0f"},K);this._contentRoot=f.create("div",{className:"_5bo0"},[this._backgroundNode,L]);if(g.isRTL())this._contentRoot.style.direction="rtl";this._contentWrapper=f.create("div",{className:"_544k"},this._contentRoot);this._contentPositioner=f.create("div",{className:"_544l"},this._contentWrapper);return this._contentPositioner};F.prototype.setMargin=function(J){"use strict";d.conditionClass(this._contentRoot,"_54wl",J==="large");d.conditionClass(this._contentRoot,"_55kj",J==="medium")};F.prototype.getInsertParent=function(){"use strict";var J=this.insertParent;if(!J){var K=this.getContext();if(K)J=j.bySigil(K,"context-layer-root")||D()}return J||s.getInsertParent.call(this)};F.prototype.setContent=function(J){"use strict";this._content=J;f.setContent(this._contentRoot,this._content);this.updateIfShown();return this};F.prototype.setContext=function(J){"use strict";this._contextNode=J};F.prototype.getCausalElement=function(){"use strict";return s.getCausalElement.call(this)||this.getContext()};F.prototype.setParentSubscription=function(){"use strict";var J=this.getContext(),K=null,L=D().parentNode;while(J!==L){K=e.get(J).layer;if(K)break;J=J.parentNode}if(K===this._parentLayer)return;if(this._parentLayer&&this._parentSubscription){this._parentSubscription.remove();this._parentSubscription=null}if(K)this._parentSubscription=K.subscribe("hide",this.hide.bind(this));this._parentLayer=K};F.prototype.setPosition=function(J){"use strict";if(this.getOrientation().setDefaultPosition(J)){this.getOrientation().setPosition(J);this.updateIfShown()}return this};F.prototype.setNubAlign=function(J){"use strict";H(J);this._nubAlignment=J||"center"};F.prototype.setOffsetY=function(J){"use strict";J=parseInt(J,10);if(this.getOrientation().setDefaultOffsetY(J))this.updateIfShown();return this};F.prototype.getOrientation=function(){"use strict";if(!this._orientation)this._orientation=new I();return this._orientation};F.prototype.getContentRoot=function(){"use strict";return this._contentRoot};F.prototype.getContent=function(){"use strict";return this._content};F.prototype.getContext=function(){"use strict";return this._contextNode};F.prototype.getContextBounds=function(){"use strict";return this.getContext().getBoundingClientRect()};F.prototype.causalClickShow=function(){"use strict";this.getContent()&&this.show()};F.prototype.show=function(){"use strict";if(this.isShown())return this;s.show.call(this);if(this.getModal())f.insertAfter(this._contentPositioner,C);if(this.isShown()){h.register(this.getRoot(),this.getContext());E.push(this);if(!this.resizeListeners){var J=this.updatePosition.bind(this);this.resizeListeners=A.map(function(P){return l.listen(P,null,J)})}var K=document.getElementById("viewport"),L=this.getContentRoot();if(K&&L){L=L.parentNode;var M=0,N=L;while(N&&N!==K){M+=N.offsetTop;N=N.offsetParent}var O=M+L.clientHeight;this._heightConstraint=k.addMinHeightConstraint(O)}}return this};F.prototype.finishHide=function(){"use strict";E.splice(E.indexOf(this),1);while(this.resizeListeners&&this.resizeListeners.length)this.resizeListeners.pop().remove();this.resizeListeners=null;l.invoke("m:flyout:close",null,{flyout:this});if(this.getModal())f.remove(C);if(this._heightConstraint){this._heightConstraint.release();this._heightConstraint=null}return s.finishHide.call(this)};F.prototype.updatePosition=function(){"use strict";var J=this.getContext();if(!J)return false;if(!J.offsetParent)return false;this.applyWidth();this.emit("adjustDimensions");var K=this.getRoot(),L=this.getOrientation();this.emit("adjust",L.reset());this.updateWrapperClass(L);var M=K.offsetParent,N=M.getBoundingClientRect(),O=this.getContextBounds(),P=O.left-N.left,Q=O.top-N.top;if(L.getPosition()==="below")Q+=O.height;var R=this.getContentRoot(),S=0;if(this._isCustomWidth()){var T=R.clientWidth,U=P+Math.round(O.width/2);S=o(Math.round(U-T/2),0,this._getLayerParentWidth()-T);R.style.left=S+"px"}else R.style.left="";K.style.top=Q+L.getOffsetY()+"px";var V=this._nubAlignment,W=P;if(O<u)V="center";if(V==="center")W+=Math.round(O.width/2);else if(this._nubAlignment==="left")W+=u/2;else W+=O.width-u/2;var X=R.getBoundingClientRect(),Y={left:X.left,width:X.width};Y.left-=N.left;var Z=x+u/2;W=o(W,Y.left+Z,Y.left+Y.width-Z);var $=W-t/2-Y.left;this._nubNode.style.left=$+"px";this.emit("reposition",L);return true};F.prototype.updateNubPosition=function(J){"use strict";if(this._nubNode)this._nubNode.style.left=J+"px"};F.prototype._toggleOrientationClass=function(J,K){"use strict";d.conditionClass(this._contentWrapper,K||this._orientationClass,J)};F.prototype.updateWrapperClass=function(J){"use strict";var K=J.getClassName();if(K===this._orientationClass)return;if(this._orientationClass)this._toggleOrientationClass(false);this._orientationClass=K;this._toggleOrientationClass(true)};F.prototype.simulateOrientation=function(J,K){"use strict";var L=J.getClassName();if(L===this._orientationClass)return K();else{if(this._orientationClass)this._toggleOrientationClass(false);this._toggleOrientationClass(true,L);var M=K();this._toggleOrientationClass(false,L);if(this._orientationClass)this._toggleOrientationClass(true);return M}};F.prototype.destroy=function(){"use strict";s.destroy.call(this);this._contextNode=null;this._contextSigil=null;this._contentRoot=null;this._contentWrapper=null;this._content=null;this._nubNode=null;this._width=null;return this};F.prototype.shouldBlurOnTouchEnd=function(){"use strict";return this.getModal()==null};q(F,{adjustDimensions:true,adjust:true,reposition:true});var G=p.thatReturnsArgument,H=p.thatReturnsArgument;function I(){"use strict";this._default={_position:"above",_offsetY:0};this.reset()}I.prototype.setPosition=function(J){"use strict";this._position=G(J);return this};I.prototype.getOppositePosition=function(){"use strict";return I.OPPOSITE[this.getPosition()]};I.prototype.getPosition=function(){"use strict";return this._position||"above"};I.prototype.getOffsetY=function(){"use strict";var J=this._offsetY||0;if(this._position==="above"){J-=w;J*=-1}else if(this._position==="below")J-=v;return J};I.prototype.getClassName=function(){"use strict";var J=this.getPosition();if(J==="below")return"_5bo1";else if(J==="above")return"_5bo2"};I.prototype.reset=function(){"use strict";Object.assign(this,this._default);return this};I.prototype.setDefaultPosition=function(J){"use strict";var K=this._default._position;this._default._position=G(J);return K!==J};I.prototype.setDefaultOffsetY=function(J){"use strict";var K=this._default._offsetY;this._default._offsetY=J;return K!==J};I.OPPOSITE={above:"below",below:"above"};l.listen("click",B,function(J){e.get(J.getNode(B)).flyout.causalClickShow()});l.listen("click",["m-layer-root","mflyout-remove-on-click"],function(J){var K=J.getNode("m-layer-root");e.get(K).layer.hide()});c.exports=F}),null);
__d("MFlyoutAutoFlip",["MViewport","MParent"],(function a(b,c,d,e,f,g,h,i){function j(k){"use strict";this.$MFlyoutAutoFlip1=null;this.$MFlyoutAutoFlip2=k}j.prototype.enable=function(){"use strict";this.$MFlyoutAutoFlip1=this.$MFlyoutAutoFlip2.addListener("adjust",this.$MFlyoutAutoFlip3.bind(this));if(this.$MFlyoutAutoFlip2.isShown())this.$MFlyoutAutoFlip2.updatePosition()};j.prototype.disable=function(){"use strict";this.$MFlyoutAutoFlip1.remove();this.$MFlyoutAutoFlip1=null;if(this.$MFlyoutAutoFlip2.isShown())this.$MFlyoutAutoFlip2.updatePosition()};j.prototype.$MFlyoutAutoFlip3=function(k){"use strict";var l=this.$MFlyoutAutoFlip4(k),m={top:this.$MFlyoutAutoFlip2.getAutoflipTopOffset()||0,bottom:h.getUseableHeight()},n=i.bySigil(this.$MFlyoutAutoFlip2.getRoot(),"scroll-area");if(n){var o=n.getBoundingClientRect();m={top:Math.max(o.top,m.top),bottom:Math.min(o.bottom,m.bottom)}}var p,q,r=this.$MFlyoutAutoFlip2,s=r.getContext(),t=s.getBoundingClientRect();for(p=0;p<l.length;p++){k.setPosition(l[p]);q=r.simulateOrientation(k,function(){return r.getRoot().firstChild.getBoundingClientRect()});var u=t.top+k.getOffsetY();if(k.getPosition()==="above")u-=q.height;else if(k.getPosition()==="below")u+=t.height;var v={top:u,bottom:u+q.height};if(v.top>=m.top&&v.bottom<=m.bottom)return}k.setPosition(l.indexOf("below")>-1?"below":l[0])};j.prototype.$MFlyoutAutoFlip4=function(k){"use strict";return[k.getPosition(),k.getOppositePosition()]};f.exports=j}),null);
__d("MFlyoutContextSigil",["Stratcom","MLegacyDataStore","DOM","ex"],(function a(b,c,d,e,f,g,h,i,j,k){var l={};function m(n){"use strict";this.$MFlyoutContextSigil1=null;this.$MFlyoutContextSigil2=n}m.prototype.enable=function(){"use strict";var n=this.$MFlyoutContextSigil3();l[n];l[n]=this.$MFlyoutContextSigil2;this.$MFlyoutContextSigil1=h.listen("click",this.$MFlyoutContextSigil3(),this.$MFlyoutContextSigil4.bind(this))};m.prototype.disable=function(){"use strict";delete l[this.$MFlyoutContextSigil3()];this.$MFlyoutContextSigil1.remove();this.$MFlyoutContextSigil1=null;this.$MFlyoutContextSigil2=null};m.prototype.$MFlyoutContextSigil3=function(){"use strict";var n=this.$MFlyoutContextSigil2.config;return n.causalSigil||n.contextSigil};m.prototype.$MFlyoutContextSigil4=function(n){"use strict";var o=n.getNode(this.$MFlyoutContextSigil3()),p,q=this.$MFlyoutContextSigil2.config.contextSigil,r=this.$MFlyoutContextSigil2.config.causalSigil;if(r&&r!==q){var s=o;while(s&&s!==document.body&&!p)if(h.hasSigil(s,q))p=s;else{var t=j.scry(s,"*",q);p=t[0];s=s.parentNode}}else p=o;if(this.$MFlyoutContextSigil2.getContext()!==p&&this.$MFlyoutContextSigil2.isShown()){this.$MFlyoutContextSigil2.hide();if(!this.$MFlyoutContextSigil2)return}this.$MFlyoutContextSigil2.setCausalElement(o);this.$MFlyoutContextSigil2.setContext(p);i.get(o).flyout=this.$MFlyoutContextSigil2;if(!this.$MFlyoutContextSigil2.isShown())this.$MFlyoutContextSigil2.show();n.prevent()};f.exports=m}),null);