if (self.CavalryLogger) { CavalryLogger.start_js(["pZWjk"]); }

__d("XFeedNewStoriesBadgeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/feed/badge/",{})}),null);
__d("MFeedJewel",["CSS","DOM","MHistory","MJewel","MJewels","MPageController","MRequest","MURI","ScriptPath","Stratcom","SubscriptionsHandler","XFeedNewStoriesBadgeController","$","formatNumber"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w,x,y,z,A,B=0,C=9,D=15e3;function E(P){h.conditionClass(y,"popoverOpen",true)}function F(P){h.conditionClass(y,"popoverOpen",false)}function G(){if(x)return;x=new r();x.addSubscriptions(i.listen(t(k.JEWEL_NAV_NODE_ID),"click","feed",J));x.addSubscriptions(q.listen("m:history:change",null,I))}function H(){x&&x.release();x=null}function I(P){var Q=P.getData().soft;for(var R=0,S=Object.keys(l);R<S.length;R++)if(l[S[R]]===Q){F();return}E()}function J(P){var Q=P.getNode("icon").getAttribute("href");if(new o(Q).normalize().toString()===new o(j.getPath()).normalize().toString()){P.kill();m.reload({reloaded:true})}p.set("topbar_feed")}function K(P){i.setContent(v,u.withMaxLimit(P,C));h.conditionClass(y,"noCount",P===0);h.conditionClass(y,"hasCount",P>0)}function L(){if(B>C)return;clearTimeout(A);A=setTimeout(function(){M()},D)}function M(){var P=s.getURIBuilder();z=new n(P.getURI().toString());z.listen("done",function(Q){B=Q.payload.count;K(Q.payload.count)});z.listen("finally",function(){z=null;L()});z.send()}function N(){B=0;K(B);clearTimeout(A);A=null}function O(P,Q){if(w)return;w=true;y=P;v=i.find(y,"span","count");q.listen("m:homepage:load",null,function(){E();G();if(v)N()});q.listen("m:homepage:unload",null,function(){F();H();if(v)L()});if(Q)G();else if(v)L()}f.exports={init:O}}),null);
__d("MGenericJewel",["CSS","DOM","MHistory","MJewel","MJewels","MViewport","ScriptPath","Stratcom","$"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q={};function r(s,t,u){if(q[s])return;q[s]=true;var v,w;i.listen(p(k.JEWEL_NAV_NODE_ID),"click",s,function(x){if(x.getNode("icon")){x.prevent();if(!v){j.pushSoftState(s);o.invoke("MGenericJewel::clicked",s,{open:true})}else if(s===l.SEARCH)o.invoke("m:chrome:tab:show",s,{open:true})}n.set("topbar_"+s)});o.listen("m:history:change",null,function(x){var y=x.getData().soft===s;if(!y&&(v||w))o.invoke("m:chrome:tab:hide",s);h.conditionClass(t,"popoverOpen",y);if(u){h.conditionClass(u,"popover_hidden",!y);h.conditionClass(u,"popover_visible",y);if(y)u.style.minHeight=m.getUseableHeight()+"px"}if(y&&!v)o.invoke("m:chrome:tab:show",s);w=x.getData().soft===undefined;v=y})}f.exports={init:r}}),null);
__d("XBookmarksFlyoutBodyController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/bookmarks/flyout/body/",{id:{type:"String",required:true}})}),null);
__d("MChromeTabsBootloader",["MJewels","MRequest","Stratcom","XBookmarksFlyoutBodyController"],(function a(b,c,d,e,f,g,h,i,j,k){var l={bootloadBookmarks:function m(n){j.listen("m:chrome:tab:show",h.BOOKMARKS,function(){j.removeCurrentListener();new i(k.getURIBuilder().setString("id",n).getURI()).send()})}};f.exports=l}),null);
__d("MBeeperController",["Bootloader","CSS","DOM","MHistory","Stratcom","URI","$","cx","getActiveElement","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=void 0,s=void 0,t=void 0,u=void 0,v=[],w=void 0,x=3e3;function y(G){w=G;q(function(){l.listen("m_notification",null,z);l.listen("blur",null,A);l.listen("m:history:change",null,F)},x)}function z(G){var H=G.getData();if(!H||!H.data||w&&!H.data.type||w&&w.indexOf(H.data.type)===-1)return;var I={notification:H.data};E(I);if(!r&&!s)h.loadModules(["ReactComponentRenderer","MBeeper.react"],function(J,K){r=J;s=K;F()},"MBeeperController");else F()}function A(G){var H=G.getTarget();if(H&&C(H))setTimeout(F,50)}function B(){v.shift();F()}function C(G){var H=G.tagName;return H==="INPUT"||H==="TEXTAREA"||G.contentEditable==="true"}function D(){return!(C(p())||n("root").offsetHeight===0)}function E(G){var H=v.find(function(I){return I.notification.alert_id===G.notification.alert_id});if(!H)v.push(G)}function F(){if(!D())return;var G=new m(k.getPath());if(G.getQueryData().soft==="notifications"){v=[];return}var H=v[0];if(!H)return;if(!t){t=j.create("div");i.addClass(t,"_3hy8");n("page").appendChild(t)}if(!u){if(r){u=new r(s,t);u.setProps(babelHelpers["extends"]({},H,{onHide:B}))}}else if(u.component.isReady())u.setProps(H)}g.init=y}),null);
__d("MPageletTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHROME:"chrome",CONTENT:"content"})}),null);
__d("MFirstPageRecorder",["DOM","MDeepCopy","MURI","MPageCache","MPageController","MPageHeaderRight","MPageTitle","MPageletTypes","MRenderingScheduler","MRequestConfig","MResponseData","Stratcom","ScriptPath","$","ge","ServerJS"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w,x=true,y=[];function z(){if(w)return;w=true;var A=new j(l.getRenderedPath()),B,C=[];y=[p.getInstance().attachListenerToSyncPageletComplete(function(){k.setCachedPage(A,B);k.clearCachedIUIResponses(A);C.forEach(function(D){k.addCachedIUIResponse(A,D)})}),p.getInstance().attachListenerToSyncPageletLoader(function(D){if(D.pageletConfig.type!==o.CONTENT)return;var E={ajax_response_token:q.ajaxResponseToken.secret,js:D.js||[],css:D.css||[],ixData:D.ixData};E.actions=[{cmd:"replace",target:D.id,html:D.element?v(D.element).innerHTML:D.content.__html,replaceifexists:false,allownull:false},{cmd:"append",target:"static_templates",html:D.pageletConfig.templates.__html,replaceifexists:true}];var F=i(D.pageletConfig.serverJSData),G=[function(){var M=c("ServerJS");new M().handle(i(F))}];if(x){x=false;var H=u("root").cloneNode(true);B=new r({ajax_response_token:q.ajaxResponseToken.secret,js:[],css:[],ixData:[],actions:[{cmd:"script",type:"immediate",fn:function M(){h.replace(u("root"),H.cloneNode(true))}}]});var I=m.getChromeHeaderRightContent();if(I&&I.length>0)G.push(function(){var M=document.createDocumentFragment();for(var L=0;L<I.length;L++)M.appendChild(I[0]);m.setup({node:M})});var J=document.title;G.push(function(){n.setTitle(J)});var K=t.getPageInfo();if(K)G.push(function(){t.set(K.scriptPath,K.categoryToken,K.extraData)})}for(var L=0;L<G.length;L++)E.actions.push({cmd:"script",type:"onload",fn:G[L]});C.push(new r(E))})]}s.listen("m:page:unload",null,function(){y.forEach(function(A){A&&A.remove();A=null});w=true;s.removeCurrentListener()});g.startPageletCaching=z}),null);
__d("MSearchConst",[],(function a(b,c,d,e,f,g){f.exports={refid:46,news_search:"news",video_search:"video",content_search:"content",msite_news_null_state:"mnns",msite_news_non_gs_null_state:"mnngns",event_click:"click",event_impression:"imp"}}),null);
__d("XMobileSearchTrendingLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/graphsearch/trending/logging/",{topic_ids:{type:"IntVector",required:true},source:{type:"String",required:true},positions:{type:"IntVector",required:true},query_id:{type:"Int",required:true},event:{type:"String",required:true}})}),null);
__d("MSearchTrendingLogger",["MRequest","MSearchConst","Run","Stratcom","XMobileSearchTrendingLoggingController","forEachObject"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n=null,o={registerTrendingTopicListeners:function p(q,r,s,t){var u,v=this;if(!n){n={};j.onLeave(function(){m(n,function(z){return z.remove()});n=null})}var w=[],x=function x(y){var z=q[y];if(z==null||n[z])return"continue";n[z]=k.listen("click",z,function(){this._logTrendingTopicClick(z,r,s[y],t)}.bind(v));w.push(n[z])};for(var y=0;y<q.length;y++){var u=x(y);if(u==="continue")continue}return w},logTrendingTopicImpressions:function p(q,r,s,t){if(!q||q.length===0)return;for(var u=0;u<q.length;u++)if(q[u]==null){q.splice(u,1);s.splice(u,1);u--}var v=l.getURIBuilder().setIntVector("topic_ids",q).setString("source",r).setIntVector("positions",s).setInt("query_id",t).setString("event",i.event_impression).getURI(),w=new h(v);w.send()},_logTrendingTopicClick:function p(q,r,s,t){if(!q)return;return function(){var u=l.getURIBuilder().setIntVector("topic_ids",[q]).setString("source",r).setIntVector("positions",[s]).setInt("query_id",t).setString("event",i.event_click).getURI(),v=new h(u);v.send()}}};f.exports=o}),null);
__d("MSearchTypeaheadPerfLoggerV2",["Banzai","Stratcom","SubscriptionsHandler","URI"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";function l(m,n,o,p){this.$MSearchTypeaheadPerfLoggerV211=3;this.$MSearchTypeaheadPerfLoggerV212=3;this.$MSearchTypeaheadPerfLoggerV22=n;this.$MSearchTypeaheadPerfLoggerV21=m;this.$MSearchTypeaheadPerfLoggerV24="mtouch_typeahead_log_perf";this.$MSearchTypeaheadPerfLoggerV25="mtouch_serp_log_perf";this.$MSearchTypeaheadPerfLoggerV28=p;this.$MSearchTypeaheadPerfLoggerV29="";this.$MSearchTypeaheadPerfLoggerV23={query:null,latencyData:[],typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:null,sessionStartTime:null,click:false,isBootstrapClick:false,isExactMatchKeywordClick:false,isNullStateClick:false,isSeeMoreClick:false};this.$MSearchTypeaheadPerfLoggerV214();this.$MSearchTypeaheadPerfLoggerV215()}l.prototype.$MSearchTypeaheadPerfLoggerV214=function(){this.$MSearchTypeaheadPerfLoggerV213=new j();this.$MSearchTypeaheadPerfLoggerV213.addSubscriptions(i.listen("m-typeahead-logger:new-session-id",null,function(m){this.$MSearchTypeaheadPerfLoggerV216(m.getData().sessionID,m.getData().query)}.bind(this)),i.listen("log-m-search-session-end",null,function(m){this.$MSearchTypeaheadPerfLoggerV217();this.$MSearchTypeaheadPerfLoggerV215()}.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen("update",this.onQueryUpdated.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen("show",this.onResultsRendered.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen("select",this.onResultLinkReady.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen("on-enter-pressed",this.onEnterPressed.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen("result-selected",this.onResultSelected.bind(this)),i.listen("m:page:render:complete",null,function(m){var n=new k(this.$MSearchTypeaheadPerfLoggerV29),o=new k(m.getData().path),p=Date.now()-this.$MSearchTypeaheadPerfLoggerV210;if(n.getPath()===o.getPath()&&p>=0){var q={tti:p,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,uriPath:n.getPath()};h.post(this.$MSearchTypeaheadPerfLoggerV25,q,{delay:this.$MSearchTypeaheadPerfLoggerV211,retry:true})}this.$MSearchTypeaheadPerfLoggerV29=""}.bind(this)))};l.prototype.destroy=function(){this.$MSearchTypeaheadPerfLoggerV213.release()};l.prototype.onEnterPressed=function(m){this.$MSearchTypeaheadPerfLoggerV29=m;this.$MSearchTypeaheadPerfLoggerV210=Date.now()};l.prototype.onResultLinkReady=function(m){this.$MSearchTypeaheadPerfLoggerV29=m.href;this.$MSearchTypeaheadPerfLoggerV210=Date.now()};l.prototype.onResultsRendered=function(m,n){var o=this.$MSearchTypeaheadPerfLoggerV218(),p=this.$MSearchTypeaheadPerfLoggerV219(o);if(p==null)return;if(!this.$MSearchTypeaheadPerfLoggerV220())return;var q=Array.isArray(m)?this.$MSearchTypeaheadPerfLoggerV221(m):this.$MSearchTypeaheadPerfLoggerV221(m.show);if(this.$MSearchTypeaheadPerfLoggerV222(q))return;var r=m.show?q.map(function(v){return{isNullStateSuggestion:o==="",isFromCache:v.isFromCache,isSeeMore:v.isSeeMore}}):q,s=r.every(function(v){return v.isNullStateSuggestion||v.isSeeMore||v.exactMatchKeyword})&&r.some(function(v){return v.isNullStateSuggestion}),t=r.every(function(v){return v.exactMatchKeyword||v.isSeeMore}),u=r.every(function(v){return v.isFromCache||v.isSeeMore||v.exactMatchKeyword})&&r.some(function(v){return v.isFromCache})&&!t;this.$MSearchTypeaheadPerfLoggerV23.latencyData.push({query:o,allFromNullState:s,allFromCache:u,allFromEcho:t||q.length===0,latency:Date.now()-p});this.$MSearchTypeaheadPerfLoggerV27=q};l.prototype.onQueryUpdated=function(m){if(this.$MSearchTypeaheadPerfLoggerV220()){this.$MSearchTypeaheadPerfLoggerV23.query=m;this.$MSearchTypeaheadPerfLoggerV26[m]=Date.now()}};l.prototype.onResultSelected=function(m){if(m.id){if(m.bootstrapped)this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=true;else if(m.exactMatchKeyword)this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=true;else if(m.isSeeMore)this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;else if(m.isNullStateSuggestion)this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=true}else if(m.rel>0){var n=this.$MSearchTypeaheadPerfLoggerV28.get(m);if(n)this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=n.bootstrap==1;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=this.$MSearchTypeaheadPerfLoggerV218()===""}else this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;this.$MSearchTypeaheadPerfLoggerV23.click=true};l.prototype.$MSearchTypeaheadPerfLoggerV215=function(){this.$MSearchTypeaheadPerfLoggerV26={};this.$MSearchTypeaheadPerfLoggerV27=[];this.$MSearchTypeaheadPerfLoggerV23.query=null;this.$MSearchTypeaheadPerfLoggerV23.latencyData=[];this.$MSearchTypeaheadPerfLoggerV23.sessionID=null;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=null;this.$MSearchTypeaheadPerfLoggerV23.click=false;this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=false;this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=false;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=false;this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=false};l.prototype.$MSearchTypeaheadPerfLoggerV218=function(){return this.$MSearchTypeaheadPerfLoggerV21.getValue()||""};l.prototype.$MSearchTypeaheadPerfLoggerV220=function(){return this.$MSearchTypeaheadPerfLoggerV23.sessionID!=null};l.prototype.$MSearchTypeaheadPerfLoggerV216=function(m,n){this.$MSearchTypeaheadPerfLoggerV215();this.$MSearchTypeaheadPerfLoggerV23.sessionID=m;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=Date.now();this.$MSearchTypeaheadPerfLoggerV23.query=n;this.$MSearchTypeaheadPerfLoggerV23.typeaheadType=this.$MSearchTypeaheadPerfLoggerV22};l.prototype.$MSearchTypeaheadPerfLoggerV219=function(m){if(this.$MSearchTypeaheadPerfLoggerV26[m]!=null)return this.$MSearchTypeaheadPerfLoggerV26[m];else return this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime};l.prototype.$MSearchTypeaheadPerfLoggerV222=function(m){var n=this.$MSearchTypeaheadPerfLoggerV27.filter(function(p){return p.id!="seeMore"}).map(function(p){return p.display}),o=m.filter(function(p){return p.id!="seeMore"}).map(function(p){return p.display});return n.length==o.length&&n.every(function(p,q){return p==o[q]})};l.prototype.$MSearchTypeaheadPerfLoggerV221=function(m){var n=this.$MSearchTypeaheadPerfLoggerV21;return m.filter(function(o){return!o.isInvalidated&&o!==n.loadingIndicator})};l.prototype.$MSearchTypeaheadPerfLoggerV217=function(){var m={query:this.$MSearchTypeaheadPerfLoggerV23.query,latencyData:this.$MSearchTypeaheadPerfLoggerV23.latencyData,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:this.$MSearchTypeaheadPerfLoggerV23.sessionID,sessionStartTime:this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime,click:this.$MSearchTypeaheadPerfLoggerV23.click,isBootstrapClick:this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick,isExactMatchKeywordClick:this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick,isNullStateClick:this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick,isSeeMoreClick:this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick};h.post(this.$MSearchTypeaheadPerfLoggerV24,m,{delay:this.$MSearchTypeaheadPerfLoggerV212,retry:true});i.invoke("typeahead-perf-logger-did-log",null,m)};f.exports=l}),null);
__d("MSearchTypeaheadPerfLoggerUtil",["MLegacyDataStore","MSearchTypeaheadPerfLoggerV2"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={getNewMSearchTypeaheadPerfLogger:function k(l,m,n){return new i(l,m.type,n,h)}};f.exports=j}),null);
__d("MRecentSearchesUpdater",["Stratcom","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h,i){var j="search-recent-queries";function k(l){"use strict";this.$MRecentSearchesUpdater1=new i();this.$MRecentSearchesUpdater1.addSubscriptions(l.listen("change",this.changeQuery.bind(this)),l.listen("select",this.addRecentSearchWithSelection.bind(this)),l.listen("show",this.changeResults.bind(this)),l.listen("query",this.addRecentSearchWithQuery.bind(this)),l.listen("refreshRecent",this.refreshRecent.bind(this)))}k.prototype.destroy=function(){"use strict";this.$MRecentSearchesUpdater1.release()};k.prototype.refreshRecent=function(){"use strict";h.invoke("refreshRecent",j,{})};k.prototype.changeQuery=function(l){"use strict";this.currentQuery=l};k.prototype.changeResults=function(l){"use strict";if(l.show)this.results=l.show.slice();else this.results=l.slice()};k.prototype.addRecentSearchWithQuery=function(){"use strict";h.invoke("addRecentQuery",j,{query:this.currentQuery})};k.prototype.addRecentSearchWithSelection=function(l){"use strict";var m=l&&(l.rel||l.getAttribute("rel"));if(!m){this.addRecentSearchWithQuery();return}for(var n=0;n<this.results.length;n++)if(this.results[n].id===m)h.invoke("addRecentSearch",j,{result:this.results[n]})};f.exports=k}),null);
__d("MSearchTypeaheadLogger",["MLegacyDataStore","DOM","MRequest","MTouchClick","Stratcom","SubscriptionsHandler","invariant","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=1e3;function q(s){var t=[];for(var u=s,v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var x;if(v){if(w>=u.length)break;x=u[w++]}else{w=u.next();if(w.done)break;x=w.value}var y=x,z=y.getAttribute("rel");if(z!=null){var A={id:z},B=y.getAttribute("type");if(B!=null)A.type=B;var C=y.getAttribute("renderType");if(C!=null)A.renderType=C;var D=i.find(y,"a","typeahead-result"),E=h.get(D),F=D.getAttribute("data-extra");if(F!=null)try{F=JSON.parse(F)}catch(G){F={}}A=babelHelpers["extends"]({},A,E,F);t.push(A)}}return t}function r(s,t){this.typeahead=s;this.uri=t;this.initialize();this.emptyQueryResults=[];this.addSubscriptions()}r.prototype.destroy=function(){clearTimeout(this.blurTimeout);this.subscriptions.release()};r.prototype.addSubscriptions=function(){var s=k.hasTouchEvents()?"touchend":"click";if(this.subscriptions)this.subscriptions.release();this.subscriptions=new m();this.subscriptions.addSubscriptions(this.typeahead.listen("focus",function(){var t=this.typeahead.getValue();t!=null||n(0);this.startSession(t,{force:true})}.bind(this)),this.typeahead.listen("change",function(t){var u=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!u.preventSessionStart)this.startSession(t);if(this.sessionInProgress())this.data.query=t}.bind(this)),this.typeahead.listen("keypress",function(t){this.keypressed+=1}.bind(this)),this.typeahead.listen("select",function(t){var u=t&&(t.rel||t.getAttribute("rel"));if(!this.data.query)this.data.null_state=1;this.data.click_event=Date.now();if(u)this.data.selected_id=u;else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)l.invoke("m:search-typeahead:select",null,{node:t,results:this.results.slice(),query:this.data.query.slice()});this.logToServer()}.bind(this)),this.typeahead.listen("show",function(t){var u=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!u.preventSessionStart){var v=this.typeahead.getValue();v!=null||n(0);this.startSession(v)}if(this.sessionInProgress())if(t.show){this.results=q(t.show);if(!this.typeahead.getValue())this.emptyQueryResults=this.results}else{this.data.candidate_results=t.slice().filter(function(w){return!w.isInvalidated});if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results}}.bind(this)),this.typeahead.listen("query",function(t,u){this.data.selected_search=1;this.data.selected_type=u;this.logToServer()}.bind(this)),l.listen(s,"search-activator",function(){this.startSession("",{force:true})}.bind(this)),l.listen(s,"graph-search-activator",function(){this.startSession("",{force:true})}.bind(this)),this.typeahead.listen("scroll",function(){this.data.scrolled=1}.bind(this)))};r.prototype.updateTypeahead=function(s){this.typeahead=s;this.addSubscriptions()};r.prototype.blur=function(s){this.blurInProgress=true;this.blurTimeout=o(function(){this.data.session_end_reason=s;if(!this.data.query)this.data.null_state=1;this.logToServer()}.bind(this),p)};r.prototype.startSession=function(s){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(this.sessionID==null&&(s||t.force)){this.data={};this.keypressed=0;this.sessionID=Math.random().toString();this.data.query=s;this.data.session_start=Date.now();l.invoke("m-typeahead-logger:new-session-id",null,{sessionID:this.sessionID,query:s})}};r.prototype.sessionInProgress=function(){if(this.sessionID!==null&&!this.blurInProgress)return true;return false};r.prototype.logToServer=function(){clearTimeout(this.blurTimeout);if(this.sessionID!=null){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)this.data.candidate_results=this.results;this.data.null_state_candidate_results=this.emptyQueryResults;this.data.last_state=this.getLastState(this.data.query,this.data.candidate_results);var s=new j(this.uri);s.setMethod("POST").setData({stats:JSON.stringify(this.data)}).send()}this.initialize()};r.prototype.getLastState=function(s,t){var u="typed",v=s.length===0&&t.every(function(w){return w.isNullStateSuggestion});if(v)u="null_state";return u};r.prototype.initialize=function(){this.data={};this.sessionID=null;this.keypressed=0;this.results=[];this.blurInProgress=false};f.exports=r}),null);
__d("XLiveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/sports/{?query}/",{date:{type:"Int"},ref:{type:"String"},source:{type:"String"},region_id:{type:"Int"},year:{type:"Int"},fref:{type:"String"},query:{type:"String"},name:{type:"String"},cursor:{type:"String"}})}),null);
__d("MTypeaheadNullstateSource",["MTypeaheadTouchSource","Stratcom","URI","XLiveController","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n,o="graph-search-entry-point",p="search-recent-queries";m=babelHelpers.inherits(q,h);n=m&&m.prototype;function q(r,s){"use strict";n.constructor.call(this,r,s);i.listen("setCurrentProfileID",o,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh()}}.bind(this));i.listen("addRecentSearch",p,function(event){var t=event.getData().result;if(t)this.addRecentResult(t)}.bind(this));i.listen("addRecentQuery",p,function(event){var t=event.getData().query;if(t){var u=this.makeRecentResultWithQuery(t);this.addRecentResult(u)}}.bind(this));i.listen("refreshRecent",p,function(){this.refresh()}.bind(this));i.listen("searchRefreshNullstate",null,function(){return this.refresh()}.bind(this));i.listen("m:search:refresh-nullstate-with-delay",null,function(){l(function(){this.refresh()}.bind(this),3e4)}.bind(this))}q.prototype.makeRecentResultWithQuery=function(r){"use strict";return{display:r,name:r,id:r,uri:"/search/top/?q="+r}};q.prototype.addRecentResult=function(r){"use strict";if(r.isTrending)return;r.isRecentSearch=true;var s={},t=0;r.idx=t;s[r.id]=r;for(var u in this._raw)if(u!=r.id){t++;this._raw[u].idx=t;s[u]=this._raw[u]}this._raw=s};q.prototype.refresh=function(){"use strict";this._raw={};this.sendRequest()};q.prototype.getAuxiliaryData=function(){"use strict";return{profile_id:this.profileID?this.profileID:this.groupID?this.groupID:null,disable_single_state:this.singleStateDisabled===true,enable_scoped:this.scopedEnabled===true}};q.prototype.ondata=function(r){"use strict";n.ondata.call(this,r.nullstate)};q.prototype.matchResults=function(r){"use strict";var s=[];if(r==="")s=Object.keys(this._raw);this.sortHits(r,s);var t=this.renderNodes(r,s);this.invoke("resultsready",t);this.invoke("complete")};q.prototype.setCurrentProfileID=function(r){"use strict";this.profileID=r};q.prototype.setForceDisableSingleState=function(r){"use strict";this.singleStateDisabled=r};q.prototype.setEnableScoped=function(r){"use strict";this.scopedEnabled=r};q.prototype.sortHits=function(r,s){"use strict";s.sort(this.sortingFunction.bind(this))};q.prototype.sortingFunction=function(r,s){"use strict";var t=this._raw[r],u=isNaN(t.idx)?Number.MAX_VALUE:t.idx,v=this._raw[s],w=isNaN(v.idx)?Number.MAX_VALUE:v.idx;return u-w};q.prototype.getTransformer=function(){"use strict";return function(r){if(r.keyword_type==="trending"){var s=new j("/topic/trending/"+r.id);if(r.isSport)s=k.getURIBuilder().setString("query",String(r.id)).setString("ref","m_search_null_state").getURI();return{id:r.name,display:r.name,name:r.name,uri:s.toString(),topicID:r.id,trendingQueryID:r.trendingQueryID,subtext:r.articleTitle,type:"trending",photo:r.articleImageURI,actionTime:0,isTrending:true,isNullStateSuggestion:true}}if(r.type==="keyword"||r.type==="grammar"){s=new j(r.path||r.uri);return{cost:r.cost,idx:r.idx,display:r.text,name:r.text,type:"keyword",id:r.uid,uri:s.toString(),actionTime:r.action_time,isPYMK:r.pymk,isRecentSearch:r.recent_search,subtext:r.subtext,logInfo:r.logInfo,isNullStateSuggestion:true,isScoped:r.is_scoped}}return{actionTime:r.action_time,name:r.text,uri:r.path||r.uri,id:r.uid||r.id,display:r.name||r.text,photo:r.photo,category:r.category,cost:r.cost,idx:r.idx,tokens:r.tokens,type:r.type[0].toUpperCase()+r.type.slice(1),verticalType:r.vertical_type,is_verified:r.is_verified,subtext:r.subtext,isPYMK:r.pymk,isRecentSearch:r.recent_search,logInfo:r.logInfo,isNullStateSuggestion:true,isScoped:r.is_scoped}}};f.exports=q}),null);